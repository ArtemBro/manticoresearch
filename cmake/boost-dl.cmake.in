cmake_minimum_required(VERSION 2.8.2)

project(boost-context-download NONE)

include(ExternalProject)

ExternalProject_Add(boost-context
		GIT_REPOSITORY https://github.com/boostorg/boost.git
		GIT_TAG boost-1.71.0
		GIT_SHALLOW ON
		SOURCE_DIR "@BOOST_CONTEXT_SRC@"
		BUILD_IN_SOURCE ON
		CONFIGURE_COMMAND ./bootstrap.sh
		BUILD_COMMAND ./b2 --with-context --with-system runtime-link=static
		INSTALL_COMMAND ./b2 install --with-context --with-system runtime-link=static --prefix=@BOOST_CONTEXT_BUILD@
		)

ExternalProject_Add_StepTargets(boost-context download install)

# file configured from cmake/boost-dl.cmake.in
