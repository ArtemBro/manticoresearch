––– block: ../../base/dind/init –––
––– input –––
docker pull -q ghcr.io/manticoresoftware/manticoresearch:test-kit-latest > /dev/null 2>&1; echo $?
––– output –––
0
––– input –––
docker pull --platform linux/x86_64 mysql:5.6 > /dev/null
––– output –––
––– input –––
docker network create test_network > /dev/null
––– output –––
––– input –––
docker run -it --network=test_network --entrypoint=docker-entrypoint.sh --platform linux/amd64 --name manticore -p 9306:9306 -d -v ./test/clt-tests/mysqldump/scripts/generate-records.sh:/generate-records.sh ghcr.io/manticoresoftware/manticoresearch:test-kit-latest searchd -c /etc/manticoresearch/manticore.conf.sh --nodetach > /dev/null; echo $?
––– output –––
0
––– input –––
timeout 10 docker logs -f manticore | grep -qm1 '\[BUDDY\] started' && echo 'Buddy started!' || echo 'Timeout or failed!'
––– output –––
Buddy started!
––– input –––
docker exec manticore bash -c "./generate-records.sh 20 | mysql -h0 -P9306"
––– output –––
––– input –––
docker exec manticore mysql -h0 -P9306 -e 'show tables'
––– output –––
+-------+------+
| Index | Type |
+-------+------+
| t     | rt   |
+-------+------+
––– input –––
docker exec manticore mysql -h0 -P9306 -e 'select count(*) from t'
––– output –––
+----------+
| count(*) |
+----------+
|       20 |
+----------+
––– input –––
docker exec manticore mysql -h0 -P9306 -e "select * from t order by id asc limit 21"
––– output –––
