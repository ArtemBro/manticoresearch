––– block: ../base/start-searchd –––
––– input –––
./test/clt-tests/mysqldump/scripts/generate-records.sh 1000000 | mysql -P9306 -h0
––– output –––
––– input –––
mysql -P9306 -h0 -e "SHOW TABLES; SELECT COUNT(*) FROM t; SELECT * FROM t;"
––– output –––
+-------+------+
| Index | Type |
+-------+------+
| t     | rt   |
+-------+------+
+----------+
| count(*) |
+----------+
|  1000000 |
+----------+
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
| id     | f         | a      | b                 | j                                            | m                                | s    |
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
| 430001 | aaa       | 108089 |  989711552.000000 | {"a":[555531789,2097149723],"b":277911058}   | 120674228,130454204,1290336674   | Sht  |
|  10001 | aaaaa     | 206668 |  211190992.000000 | {"a":[91104134,627773125],"b":1674299257}    | 1251313386,1551300218,1797679481 | SEf  |
|  10002 | a         | 148515 | 1705227392.000000 | {"a":[1241114280,714341311],"b":744680468}   | 1552591038,1957820829,2082789608 | rQv  |
| 430002 |           |  15308 |  436915264.000000 | {"a":[83417840,810380420],"b":1492023554}    | 227781285,422442113,1940247068   | KMS  |
| 430003 | aaaaa     |  50710 |  169965584.000000 | {"a":[1990242364,2009080525],"b":1948620992} | 531646208,1668875589,1768348192  | WGx  |
|  10003 | aa        | 143647 | 1952468096.000000 | {"a":[258258639,1232165712],"b":274364299}   | 891889019,1812160130,2017869447  | MpY  |
|  10004 | aaa       |  52128 | 1926649472.000000 | {"a":[1559285515,265191163],"b":1147064610}  | 19500580,108548087,189847197     | vvd  |
| 430004 | aa        | 200474 | 1563089664.000000 | {"a":[554900737,1764457692],"b":800485223}   | 679311450,1309557729,1971177887  | UbK  |
| 430005 | aaa       | 112322 | 1417193472.000000 | {"a":[1946746565,757830533],"b":1173780015}  | 1252959852,1334212608,1937658531 | rxf  |
|  10005 |           |  75494 | 1999053312.000000 | {"a":[2093218271,754931580],"b":736240721}   | 275222810,577534692,695891936    | QbA  |
|  10006 |           | 166738 |  475617504.000000 | {"a":[451353355,1366352980],"b":358068680}   | 213564789,1598730321,1995843242  | dlS  |
| 430006 | a         | 196494 |  999022144.000000 | {"a":[1625665714,73874701],"b":16968799}     | 982876048,1945428403,2094976464  | jKr  |
| 430007 |           | 111726 | 1459211776.000000 | {"a":[204639208,1258793570],"b":563793650}   | 709715138,1470861704,1971690563  | dUI  |
|  10007 | aa        |  65361 | 1390972160.000000 | {"a":[644929467,249711412],"b":2068649661}   | 1104289767,1549717101,1907795548 | xnC  |
|  10008 | aaaaa     | 122106 | 1888352384.000000 | {"a":[191097891,1206314805],"b":18311337}    | 69151453,1063425307,1360620524   | Exh  |
| 430008 | aaaaaaaaa |   2700 |  234538432.000000 | {"a":[218748419,1621465819],"b":115759508}   | 1078511639,1132803980,2111790339 | btz  |
| 430009 | aaa       |  67495 | 1060630976.000000 | {"a":[490495931,1396272393],"b":1109070599}  | 1107513819,1696369098,1824366063 | rdj  |
|  10009 | aaaa      | 187786 | 1328637312.000000 | {"a":[1909578185,2001183074],"b":270056182}  | 70840137,723090121,1451495683    | UvU  |
| 430010 | aa        |   6449 | 1561141120.000000 | {"a":[1365215828,1524379042],"b":1192271393} | 199375657,750821864,1826931683   | WCE  |
|  10010 | a         |  18830 | 1197473920.000000 | {"a":[1595061753,2101901101],"b":736812079}  | 811225734,1040324746,2040065202  | Azb  |
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT * FROM t ORDER BY id DESC;"
––– output –––
+---------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
| id      | f         | a      | b                 | j                                            | m                                | s    |
+---------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
| 1000000 | aaaaa     | 174724 | 1337828608.000000 | {"a":[1390825391,1065161165],"b":1581394534} | 1156000444,1475283959,1858764492 | Ohd  |
|  999999 | aa        | 110921 | 1031224192.000000 | {"a":[1221864712,748481992],"b":1007442821}  | 1846665287,2005767272,2125747746 | CQY  |
|  999998 | aaaaaaaaa |  67604 | 2089881344.000000 | {"a":[1827933329,1042698189],"b":1237264562} | 189803242,300390563,1833473886   | Gbn  |
|  999997 | aa        | 151664 | 1075974400.000000 | {"a":[1301282452,1178476452],"b":1620353659} | 549749728,647653371,2036963167   | ACK  |
|  999996 |           | 139268 | 1144723200.000000 | {"a":[376646578,1040402340],"b":33286550}    | 971082389,1247484573,1985949240  | GWQ  |
|  999995 | aa        |  80386 | 1014697664.000000 | {"a":[71330679,585265392],"b":740130620}     | 808340945,2010317654,2026856410  | frK  |
|  999994 | aa        | 140899 | 1962039552.000000 | {"a":[1381272634,959700892],"b":1855045484}  | 136573664,469199030,1628689002   | tOU  |
|  999993 | aaaaa     |  71421 | 1240048256.000000 | {"a":[973744426,868453995],"b":193856292}    | 212933391,1168584736,1761984670  | zSt  |
|  999992 | aaaaa     |  59028 | 1235083136.000000 | {"a":[506683038,100840165],"b":936168822}    | 257667644,1873968675,2005357926  | tEx  |
|  999991 | aaaaa     | 179935 |  194913536.000000 | {"a":[156374518,69084935],"b":599672955}     | 393578629,548405190,679951883    | jOx  |
|  999990 | aa        | 103212 |  990926528.000000 | {"a":[1350716686,1317999922],"b":1205561654} | 567217944,570645013,1743650519   | xUS  |
|  999989 | aa        | 110738 | 2062548096.000000 | {"a":[845125687,1964298272],"b":1606622665}  | 545192990,904611937,1732264908   | ndO  |
|  999988 | a         | 131872 | 1693469440.000000 | {"a":[87316653,973212351],"b":1426260286}    | 238990673,387397671,1596252408   | bvh  |
|  999987 |           | 110992 | 1154140032.000000 | {"a":[2025029382,423441160],"b":471966822}   | 249007126,1083029016,2030360567  | CMM  |
|  999986 | aaaaa     | 133003 |  834640512.000000 | {"a":[693351723,1325605955],"b":1902125943}  | 702187036,911116469,1098279512   | xzl  |
|  999985 | aaaa      |  10860 |  555863936.000000 | {"a":[962141196,1544693034],"b":524918579}   | 1327749776,1544404435,1594776533 | lQO  |
|  999984 | aaaaaaaa  | 105771 |  520272992.000000 | {"a":[1374555801,1423480668],"b":864406642}  | 973436102,1078480614,1534221860  | KvM  |
|  999983 | aaaaaaaaa |  10805 | 1850511360.000000 | {"a":[32732350,2097271839],"b":1647546016}   | 1140488860,1209017351,1912494957 | GOn  |
|  999982 | aaaa      | 206133 | 1608744192.000000 | {"a":[749328260,1821922124],"b":292014633}   | 19846899,806064395,1362387687    | ASW  |
|  999981 | a         | 198714 | 1748809984.000000 | {"a":[1743435373,938004011],"b":1834676738}  | 117012282,1693824262,1738357297  | brj  |
+---------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, b FROM t WHERE id BETWEEN 10000 AND 50000;"
––– output –––
+-------+-----------+--------+-------------------+
| id    | f         | a      | b                 |
+-------+-----------+--------+-------------------+
| 10001 | aaaaa     | 206668 |  211190992.000000 |
| 10002 | a         | 148515 | 1705227392.000000 |
| 10003 | aa        | 143647 | 1952468096.000000 |
| 10004 | aaa       |  52128 | 1926649472.000000 |
| 10005 |           |  75494 | 1999053312.000000 |
| 10006 |           | 166738 |  475617504.000000 |
| 10007 | aa        |  65361 | 1390972160.000000 |
| 10008 | aaaaa     | 122106 | 1888352384.000000 |
| 10009 | aaaa      | 187786 | 1328637312.000000 |
| 10010 | a         |  18830 | 1197473920.000000 |
| 10011 | a         | 172922 |  398941920.000000 |
| 10012 | aaaaaaaa  | 167960 |   42701988.000000 |
| 10013 | aaaaaaa   | 176688 |  683654336.000000 |
| 10014 | aaa       |  36208 |  732534848.000000 |
| 10015 | aaaaaaaaa |  29279 | 2119970560.000000 |
| 10016 | aaaa      | 180520 | 1394305152.000000 |
| 10017 | aaaaaa    | 120163 | 1436856064.000000 |
| 10018 | aaaaaaa   | 168308 |  829828800.000000 |
| 10019 | aaaaa     | 198734 | 1057301440.000000 |
| 10000 | aaaa      |  78500 |  904701696.000000 |
+-------+-----------+--------+-------------------+
––– input –––
mysql -P9306 -h0 -e "SELECT s, COUNT(*) FROM t GROUP BY s;"
––– output –––
+------+----------+
| s    | count(*) |
+------+----------+
| njK  |       33 |
| lrh  |       21 |
| lIG  |       16 |
| SEv  |       28 |
| Klt  |       38 |
| ShK  |       12 |
| Yhb  |       18 |
| EYO  |       23 |
| Idx  |       10 |
| GAC  |       29 |
| YvK  |        5 |
| UzU  |        7 |
| IAb  |        9 |
| rYK  |        7 |
| Sht  |       27 |
| bME  |       18 |
| GGA  |       15 |
| MUv  |       28 |
| vKS  |       38 |
| AfU  |       22 |
+------+----------+
––– input –––
mysql -P9306 -h0 -e "SELECT a, COUNT(*) FROM t WHERE a > 100000 GROUP BY a HAVING COUNT(*) > 10;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT * FROM t LIMIT 10 OFFSET 20;"
––– output –––
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
| id     | f         | a      | b                 | j                                            | m                                | s    |
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
|  10011 | a         | 172922 |  398941920.000000 | {"a":[1531031590,1277447681],"b":694709682}  | 521642080,952895601,1128327201   | MKd  |
| 430011 | a         |  25337 |  306663680.000000 | {"a":[632799656,196533331],"b":1733673928}   | 192739856,1130371643,1368589403  | rIh  |
| 430012 | aaaaaaa   | 182659 |  522286208.000000 | {"a":[1942733087,702430357],"b":1983507569}  | 917993639,1278387605,1860372279  | Kjf  |
|  10012 | aaaaaaaa  | 167960 |   42701988.000000 | {"a":[270782166,92116888],"b":200260336}     | 1349302801,1389619261,2127732090 | dSG  |
|  10013 | aaaaaaa   | 176688 |  683654336.000000 | {"a":[1396303524,80234457],"b":929831669}    | 806515057,1568358299,1601233520  | KSr  |
| 430013 | aaaaaa    | 146497 | 1222092288.000000 | {"a":[1197455840,1670787186],"b":1607979430} | 617239424,1305157135,2101533906  | xWQ  |
| 430014 | aaaaa     | 131153 |  796674304.000000 | {"a":[1109132611,405810585],"b":151596374}   | 898147231,1062024518,1472525232  | zpl  |
|  10014 | aaa       |  36208 |  732534848.000000 | {"a":[2078157997,437483203],"b":2087144558}  | 56127553,1344046613,1451531806   | ltb  |
| 430015 | aaa       | 164050 | 1659714432.000000 | {"a":[1551246473,1355208473],"b":654620985}  | 186753060,253903241,1708826799   | Gxv  |
|  10015 | aaaaaaaaa |  29279 | 2119970560.000000 | {"a":[785951685,695575559],"b":1722205599}   | 1324939516,1392578761,2007121539 | Szd  |
+--------+-----------+--------+-------------------+----------------------------------------------+----------------------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, JSON_UNQUOTE(JSON_EXTRACT(j, \"$.b\")) AS json_field FROM t WHERE MATCH('@j.b 1000000') LIMIT 5;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a FROM t WHERE b IS NOT NULL ORDER BY b DESC LIMIT 10;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT s, SUM(b) as total_b FROM t GROUP BY s HAVING total_b > 1000000;"
––– output –––
+------+--------------------+
| s    | total_b            |
+------+--------------------+
| IAb  |  9681964032.000000 |
| rYK  |  7812950528.000000 |
| Sht  | 26558687232.000000 |
| bME  | 22354497536.000000 |
| GGA  | 15826222080.000000 |
| MUv  | 25832704000.000000 |
| vKS  | 44702961664.000000 |
| AfU  | 25406881792.000000 |
| jUt  | 26912380928.000000 |
| jpj  | 27572002816.000000 |
| OtE  | 27776559104.000000 |
| SEf  | 44885651456.000000 |
| njK  | 37504536576.000000 |
| lrh  | 22100176896.000000 |
| lIG  | 19660963840.000000 |
| SEv  | 29278185472.000000 |
| Klt  | 44938629120.000000 |
| ShK  | 16228265984.000000 |
| Yhb  | 21847117824.000000 |
| EYO  | 24251609088.000000 |
+------+--------------------+
––– input –––
mysql -P9306 -h0 -e "SELECT * FROM t WHERE MATCH('aaa') ORDER BY id DESC LIMIT 10;"
––– output –––
+--------+------+--------+-------------------+----------------------------------------------+---------------------------------+------+
| id     | f    | a      | b                 | j                                            | m                               | s    |
+--------+------+--------+-------------------+----------------------------------------------+---------------------------------+------+
| 999959 | aaa  |  83651 | 1059224384.000000 | {"a":[1004760609,1070673773],"b":98530818}   | 231152394,561960395,896004760   | Mvn  |
| 999952 | aaa  |  30861 | 1890594816.000000 | {"a":[1078035475,1219342433],"b":1062733997} | 109155969,1028065090,1246556253 | Wxx  |
| 999950 | aaa  | 183825 | 1939147520.000000 | {"a":[1114712536,1880150383],"b":781387602}  | 511514751,844643095,1676519926  | ECh  |
| 999934 | aaa  |  28455 |  918460992.000000 | {"a":[281510403,904535283],"b":1988575510}   | 165313596,854781213,1994906549  | Cfp  |
| 999921 | aaa  | 193393 |  237388256.000000 | {"a":[1979157528,298433003],"b":1127602970}  | 184428129,1126149976,1185234085 | WKl  |
| 999903 | aaa  |   5736 |  477982976.000000 | {"a":[1355322482,496759683],"b":91978195}    | 406719972,663167463,1085190415  | dUr  |
| 999895 | aaa  | 124672 |  255251008.000000 | {"a":[1506124470,325033533],"b":500459189}   | 335462060,706209731,1423882522  | nGt  |
| 999884 | aaa  |  63220 |  623063936.000000 | {"a":[528960553,1188391873],"b":510275178}   | 81425237,377966298,734085261    | Crt  |
| 999874 | aaa  |  82655 | 1085055872.000000 | {"a":[782270744,1119520403],"b":913453608}   | 115106792,1061037541,1783830341 | bIb  |
| 999863 | aaa  | 108293 |  137051024.000000 | {"a":[630848365,406288013],"b":1229689695}   | 610117698,1687824317,1768348261 | Krb  |
+--------+------+--------+-------------------+----------------------------------------------+---------------------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, b FROM t WHERE id IN (10001, 10005, 10010);"
––– output –––
+-------+-------+--------+-------------------+
| id    | f     | a      | b                 |
+-------+-------+--------+-------------------+
| 10001 | aaaaa | 206668 |  211190992.000000 |
| 10005 |       |  75494 | 1999053312.000000 |
| 10010 | a     |  18830 | 1197473920.000000 |
+-------+-------+--------+-------------------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, b, s FROM t WHERE MATCH('@f aa*') AND b BETWEEN 100000000 AND 200000000 ORDER BY b ASC;"
––– output –––
+--------+------+--------+------------------+------+
| id     | f    | a      | b                | s    |
+--------+------+--------+------------------+------+
| 376067 | aa   | 159528 | 100005352.000000 | rxW  |
| 889984 | aa   | 149632 | 100030912.000000 | SfG  |
| 620427 | aa   |   5650 | 100036912.000000 | nYO  |
| 720399 | aa   | 176361 | 100065568.000000 | ptS  |
| 328563 | aa   | 186404 | 100138840.000000 | WdI  |
| 699302 | aa   |   3514 | 100173576.000000 | vzW  |
| 702779 | aa   |  93515 | 100205800.000000 | jUC  |
| 218497 | aa   |   3452 | 100220720.000000 | fhO  |
| 773443 | aa   |   7008 | 100241240.000000 | KQO  |
| 138058 | aa   | 207043 | 100271928.000000 | nQC  |
| 743471 | aa   | 122663 | 100317384.000000 | vMU  |
| 298992 | aa   |  81006 | 100324184.000000 | OIM  |
| 301832 | aa   |  29247 | 100331680.000000 | xEK  |
| 421152 | aa   | 173579 | 100367632.000000 | QnS  |
| 478632 | aa   | 104878 | 100420224.000000 | MOG  |
| 124194 | aa   | 211127 | 100461808.000000 | SpQ  |
|  52223 | aa   |  97076 | 100493880.000000 | dMW  |
| 594593 | aa   | 202236 | 100510648.000000 | GIQ  |
| 172320 | aa   | 151571 | 100559768.000000 | hbE  |
| 637971 | aa   |  64368 | 100564824.000000 | WUU  |
+--------+------+--------+------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, JSON_UNQUOTE(JSON_EXTRACT(j, '$.b')) AS json_field FROM t WHERE MATCH('@j.b 1000000') LIMIT 5;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, s FROM t WHERE MATCH('content:(+important -trivial)') LIMIT 10 OFFSET 5;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, b, s FROM t LIMIT 20,10;"
––– output –––
+--------+-----------+--------+-------------------+------+
| id     | f         | a      | b                 | s    |
+--------+-----------+--------+-------------------+------+
|  10011 | a         | 172922 |  398941920.000000 | MKd  |
| 430011 | a         |  25337 |  306663680.000000 | rIh  |
| 430012 | aaaaaaa   | 182659 |  522286208.000000 | Kjf  |
|  10012 | aaaaaaaa  | 167960 |   42701988.000000 | dSG  |
|  10013 | aaaaaaa   | 176688 |  683654336.000000 | KSr  |
| 430013 | aaaaaa    | 146497 | 1222092288.000000 | xWQ  |
| 430014 | aaaaa     | 131153 |  796674304.000000 | zpl  |
|  10014 | aaa       |  36208 |  732534848.000000 | ltb  |
| 430015 | aaa       | 164050 | 1659714432.000000 | Gxv  |
|  10015 | aaaaaaaaa |  29279 | 2119970560.000000 | Szd  |
+--------+-----------+--------+-------------------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, s FROM t WHERE a BETWEEN 50000 AND 150000 GROUP BY s HAVING COUNT(*) > 5;"
––– output –––
+--------+-----------+--------+------+
| id     | f         | a      | s    |
+--------+-----------+--------+------+
| 740001 | aaaaaaaaa |  66812 | SEv  |
| 720001 | aaaaaa    | 139222 | AfU  |
| 700001 | a         |  61421 | MUv  |
| 430001 | aaa       | 108089 | Sht  |
| 880001 | aaaa      | 145576 | bME  |
| 890001 |           |  51666 | OtE  |
| 760001 | aaaaaaa   |  91047 | Klt  |
| 970001 | aaaa      |  73366 | UzU  |
| 910001 | aaaaa     | 147609 | Yhb  |
| 930001 |           | 132912 | EYO  |
| 860001 | a         |  57370 | jpj  |
| 780001 | aaaaaaaa  |  62045 | njK  |
| 740002 |           | 133864 | MGK  |
|  10002 | a         | 148515 | rQv  |
| 680002 | aaaa      |  67458 | fnQ  |
| 840002 | a         |  65924 | WUj  |
| 820002 | aaaaaaaa  |  63170 | rMA  |
| 890002 | aa        | 101693 | rGK  |
| 880002 | aaaaaaaa  | 114362 | hUK  |
| 940002 | aaa       |  81571 | CIz  |
+--------+-----------+--------+------+
––– input –––
mysql -P9306 -h0 -e "SELECT a, GROUP_CONCAT(f SEPARATOR ', ') AS concatenated_f FROM t GROUP BY a HAVING COUNT(*) > 10;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, a, b, s FROM t WHERE MOD(id, 2) = 0 ORDER BY id LIMIT 10;"
––– output –––
––– input –––
mysql -P9306 -h0 -e "SELECT id, f, JSON_UNQUOTE(JSON_EXTRACT(j, '$.a')) AS json_field FROM t WHERE JSON_LENGTH(j, '$.a') > 1 ORDER BY JSON_LENGTH(JSON_EXTRACT(j, '$.a')) DESC LIMIT 5;"
––– output –––
