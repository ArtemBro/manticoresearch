––– block: ../base/start-searchd –––
––– input –––
chmod +x ./test/clt-tests/core/bash-script-1mln-replace.sh
––– output –––
––– input –––
./test/clt-tests/core/bash-script-1mln-replace.sh
––– output –––
--------------
SHOW TABLES
--------------
--------------
DROP TABLE IF EXISTS t
--------------
--------------
SHOW TABLES
--------------
--------------
CREATE TABLE t (id BIGINT, model TEXT, storage_capacity INTEGER, color TEXT, release_year INTEGER, price FLOAT, sold BOOL, date_added TIMESTAMP, product_codes MULTI, values MULTI64, additional_info JSON) engine='columnar'
--------------
+-------+------+
| Index | Type |
+-------+------+
| t     | rt   |
+-------+------+
+----------+
| count(*) |
+----------+
|       50 |
+----------+
––– input –––
mysql -h0 -P9306 -e "show version;"
––– output –––
+-----------+--------------------------------+
| Component | Version                        |
+-----------+--------------------------------+
| Daemon    | 6.2.13 1767b1715@24030611 dev  |
| Columnar  | columnar 2.2.5 aa3504b@240304  |
| Secondary | secondary 2.2.5 aa3504b@240304 |
| KNN       | knn 2.2.5 aa3504b@240304       |
| Buddy     | buddy v2.3.1                   |
+-----------+--------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 15 PRO' WHERE id = 6; select * from t WHERE id = 6;"
––– output –––
+------+---------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
| id   | model         | color | storage_capacity | release_year | price    | sold | date_added | product_codes | values | additional_info |
+------+---------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
|    6 | iPhone 15 PRO |       |                0 |            0 | 0.000000 |    0 |          0 |               |        | NULL            |
+------+---------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 15 PRO', color='red'  WHERE id = 6; select * from t WHERE id = 6;"
––– output –––
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET storage_capacity =512, release_year =2024 WHERE id = 5; select * from t WHERE id = 5;"
––– output –––
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
| id   | model | color | storage_capacity | release_year | price    | sold | date_added | product_codes | values | additional_info |
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
|    5 |       |       |              512 |         2024 | 0.000000 |    0 |          0 |               |        | NULL            |
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 13 Pro Max', color ='titan', storage_capacity =1000, release_year =2023, sold =1, date_added =4077861360, product_codes =(30,31,32), values =523456764345678365,9223372036854775244, additional_info =\"{\"features\":[\"ProMotion display\",\"Ceramic Shield front cover\",\"Water and dust resistance\"]}\" WHERE id = 11; select * from t WHERE id = 11;"
––– output –––
+------+-------------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
| id   | model             | color | storage_capacity | release_year | price    | sold | date_added | product_codes | values | additional_info |
+------+-------------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
|   11 | iPhone 13 Pro Max | titan |             1000 |         2023 | 0.000000 |    1 | 4077861360 | 30,31,32      |        | NULL            |
+------+-------------------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET id = 10 WHERE id = 3; select * from t WHERE id = 3;"
––– output –––
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET product_codes = (30,35,40) WHERE id = 4; select * from t WHERE id = 4;"
––– output –––
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
| id   | model | color | storage_capacity | release_year | price    | sold | date_added | product_codes | values | additional_info |
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
|    4 |       |       |                0 |            0 | 0.000000 |    0 |          0 | 30,35,40      |        | NULL            |
+------+-------+-------+------------------+--------------+----------+------+------------+---------------+--------+-----------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET product_codes = (30,35,40) WHERE id = 4; select * from t WHERE id = 4;"
––– output –––
