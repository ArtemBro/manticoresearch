––– block: ../base/start-searchd –––
––– input –––
chmod +x ./test/clt-tests/core/bash-script-1mln-replace.sh
––– output –––
––– input –––
./test/clt-tests/core/bash-script-1mln-replace.sh
––– output –––
--------------
SHOW TABLES
--------------
--------------
DROP TABLE IF EXISTS t
--------------
--------------
SHOW TABLES
--------------
--------------
CREATE TABLE t (id BIGINT, model TEXT, storage_capacity INTEGER, color TEXT, release_year INTEGER, price FLOAT, sold BOOL, date_added TIMESTAMP, product_codes MULTI, values MULTI64, additional_info JSON) engine='columnar'
--------------
+-------+------+
| Index | Type |
+-------+------+
| t     | rt   |
+-------+------+
+----------+
| count(*) |
+----------+
|  1000000 |
+----------+
––– input –––
mysql -h0 -P9306 -e "show version;"
––– output –––
+-----------+--------------------------------+
| Component | Version                        |
+-----------+--------------------------------+
| Daemon    | 6.2.13 1767b1715@24030611 dev  |
| Columnar  | columnar 2.2.5 aa3504b@240304  |
| Secondary | secondary 2.2.5 aa3504b@240304 |
| KNN       | knn 2.2.5 aa3504b@240304       |
| Buddy     | buddy v2.3.1                   |
+-----------+--------------------------------+
––– input –––
mysql -h0 -P9306 -e "select * from t WHERE id = 333 OR id = 222;"
––– output –––
+------+--------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
| id   | model              | color | storage_capacity | release_year | price      | sold | date_added | product_codes | values                                  | additional_info                                                         |
+------+--------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
|  222 | Motorola Moto G100 | blue  |              256 |         2021 | 499.989990 |    1 | 1388780896 | 63,64,65      | 1623456764345678976,9223372036854775807 | {"features":["Snapdragon 870","6.7-inch display","Quad-camera system"]} |
|  333 | BlackBerry Motion  | black |               32 |         2017 | 399.989990 |    0 | 1302346864 | 93,94,95      | 2623456764345678976,9223372036854775807 | {"features":["Snapdragon 625","5.5-inch display","Water-resistant"]}    |
+------+--------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 15 PRO' WHERE id = 101; select * from t WHERE id = 101;"
––– output –––
+------+---------------+--------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------------------------+
| id   | model         | color  | storage_capacity | release_year | price       | sold | date_added | product_codes | values                                 | additional_info                                                                   |
+------+---------------+--------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------------------------+
|  101 | iPhone 15 PRO | silver |              256 |         2021 | 1099.989990 |    1 | 2224442480 | 1,2,3         | 523456764345678976,9223372036854775807 | {"features":["ProMotion display","A15 Bionic chip","Ceramic Shield front cover"]} |
+------+---------------+--------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 15 PRO', color='red'  WHERE id = 111; select * from t WHERE id = 111;"
––– output –––
+------+---------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------+
| id   | model         | color | storage_capacity | release_year | price       | sold | date_added | product_codes | values                                 | additional_info                                                 |
+------+---------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------+
|  111 | iPhone 15 PRO | red   |              512 |         2021 | 1199.989990 |    1 | 3569736816 | 30,31,32      | 523456764345678976,9223372036854775807 | {"features":["Dynamic AMOLED 2X","Exynos 2100","108MP camera"]} |
+------+---------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+-----------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET model ='iPhone 13 Pro Max', color ='titan', storage_capacity =1000, release_year =2023, sold =1, date_added =4077861360, product_codes =(30,31,32), values = (523456764345678365,9223372036854775244), additional_info = '{\"features\":[\"ProMotion display\",\"Ceramic Shield front cover\",\"Water and dust resistance\"]}' WHERE id = 115; select * from t WHERE id = 115;"
––– output –––
+------+-------------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+--------------------------------------------------------------------------+
| id   | model             | color | storage_capacity | release_year | price       | sold | date_added | product_codes | values                                 | additional_info                                                          |
+------+-------------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+--------------------------------------------------------------------------+
|  115 | iPhone 13 Pro Max | titan |             1000 |         2023 | 1299.989990 |    1 | 4077861360 | 30,31,32      | 923456764345678976,9223372036854775807 | {"features":["Snapdragon 888","4K OLED display","Triple-camera system"]} |
+------+-------------------+-------+------------------+--------------+-------------+------+------------+---------------+----------------------------------------+--------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET product_codes = (30,35,40) WHERE id = 120; select * from t WHERE id = 120;"
––– output –––
+------+---------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
| id   | model   | color       | storage_capacity | release_year | price      | sold | date_added | product_codes | values                                  | additional_info                                                                   |
+------+---------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
|  120 | LG Wing | aurora gray |              256 |         2020 | 999.989990 |    1 | 1496660080 | 30,35,40      | 1423456764345678976,9223372036854775807 | {"features":["Qualcomm Snapdragon 765G","Swivel display","Triple-camera system"]} |
+------+---------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET id =777 WHERE id = 144; select * from t WHERE id = 144;"
––– output –––
+------+-----------------+--------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+--------------------------------------------------------------------+
| id   | model           | color        | storage_capacity | release_year | price      | sold | date_added | product_codes | values                                  | additional_info                                                    |
+------+-----------------+--------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+--------------------------------------------------------------------+
|  144 | Sony Xperia XZ3 | forest green |               64 |         2018 | 899.989990 |    1 | 3308512240 | 126,127,128   | 3723456764345678976,9223372036854775807 | {"features":["Snapdragon 845","6.0-inch display","Single camera"]} |
+------+-----------------+--------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+--------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET price =15000.99, additional_info = '{\"features\": [\"Snapdragon 690\", \"6.7-inch display\", \"Quad-camera system\"]}', product_codes = (453,45,4532) WHERE id = 117; select * from t WHERE id = 117;"
––– output –––
+------+----------------------+---------------+------------------+--------------+--------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
| id   | model                | color         | storage_capacity | release_year | price        | sold | date_added | product_codes | values                                  | additional_info                                                         |
+------+----------------------+---------------+------------------+--------------+--------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
|  117 | Motorola Edge 20 Pro | midnight blue |              256 |         2021 | 15000.990234 |    0 | 1501096560 | 45,453,4532   | 1123456764345678976,9223372036854775807 | {"features":["Snapdragon 690","6.7-inch display","Quad-camera system"]} |
+------+----------------------+---------------+------------------+--------------+--------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET product_codes = (53,45,77), values = (1423456764345,92233720368548) WHERE id = 119; select * from t WHERE id = 119;"
––– output –––
+------+---------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
| id   | model               | color | storage_capacity | release_year | price      | sold | date_added | product_codes | values                                  | additional_info                                                                   |
+------+---------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
|  119 | BlackBerry Evolve X | black |               64 |         2018 | 599.989990 |    0 | 3697138672 | 45,53,77      | 1323456764345678976,9223372036854775807 | {"features":["Qualcomm Snapdragon 660","5.99-inch display","Dual-camera system"]} |
+------+---------------------+-------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-----------------------------------------------------------------------------------+
––– input –––
mysql -h0 -P9306 -e "REPLACE INTO t SET storage_capacity = 512, release_year = 2024 WHERE id = 149; select * from t WHERE id = 149;"
––– output –––
+------+------------------------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
| id   | model                  | color       | storage_capacity | release_year | price      | sold | date_added | product_codes | values                                  | additional_info                                                         |
+------+------------------------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
|  149 | Motorola Moto Z2 Force | super black |              512 |         2024 | 799.989990 |    0 | 1043262576 | 141,142,143   | 4223456764345678976,9223372036854775807 | {"features":["Snapdragon 835","5.5-inch display","Dual-camera system"]} |
+------+------------------------+-------------+------------------+--------------+------------+------+------------+---------------+-----------------------------------------+-------------------------------------------------------------------------+
